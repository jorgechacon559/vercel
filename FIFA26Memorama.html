<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FIFA World Cup 2026 - Memory Champions ARCADE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#00ff88">
    <meta name="msapplication-navbutton-color" content="#00ff88">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;500;700;900&family=Audiowide&display=swap');
        
        :root {
            /* FIFA 2026 Official Colors */
            --fifa-primary: #007748;      /* FIFA Green */
            --fifa-secondary: #FFD700;    /* Gold */
            --fifa-accent: #FF6B00;       /* Orange */
            --fifa-blue: #003DA5;         /* Deep Blue */
            --fifa-red: #D50000;          /* Red */
            --fifa-dark: #1a1a1a;         /* Dark Background */
            --fifa-light: #f8f9fa;        /* Light */
            
            /* Soccer Field Colors */
            --field-green: #228B22;
            --field-light: #32CD32;
            --field-white: #FFFFFF;
            
            /* Gradients */
            --gradient-field: linear-gradient(135deg, var(--field-green) 0%, var(--field-light) 100%);
            --gradient-stadium: linear-gradient(180deg, #2C3E50 0%, #34495E 50%, #2C3E50 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            
            /* Shadows */
            --shadow-card: 0 8px 32px rgba(0,0,0,0.3);
            --shadow-hover: 0 12px 40px rgba(0,119,72,0.4);
            --glow-fifa: 0 0 20px rgba(0,119,72,0.6);
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Exo 2', sans-serif;
            background: 
                radial-gradient(circle at 20% 20%, rgba(0,119,72,0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255,215,0,0.1) 0%, transparent 50%),
                var(--gradient-stadium);
            min-height: 100vh;
            margin: 0;
            overflow-x: hidden;
            position: relative;
        }

        .orbitron { font-family: 'Orbitron', monospace; }
        .audiowide { font-family: 'Audiowide', cursive; }
        .exo2 { font-family: 'Exo 2', sans-serif; }

        /* SIMPLIFIED ANIMATIONS FOR PERFORMANCE */
        @keyframes neonPulse {
            0%, 100% { 
                text-shadow: 0 0 10px currentColor;
            }
            50% { 
                text-shadow: 0 0 20px currentColor;
            }
        }

        @keyframes arcadeSlide {
            0% { 
                transform: translateX(-50px);
                opacity: 0;
            }
            100% { 
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes cardFlipArcade {
            0% { 
                transform: rotateY(0deg);
            }
            100% { 
                transform: rotateY(180deg);
            }
        }

        /* ARCADE COMPONENTS */
        .arcade-header {
            background: linear-gradient(135deg, rgba(0,0,0,0.9) 0%, rgba(26,26,46,0.9) 100%);
            border-bottom: 3px solid #00ff88;
            box-shadow: 0 5px 30px rgba(0,255,136,0.3);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .neon-logo {
            background: linear-gradient(45deg, #00ff88, #00d4ff, #ff0080);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px #00ff88;
            animation: neonPulse 3s ease-in-out infinite;
        }

        
        .stats-arcade::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0,255,136,0.2), transparent);
            animation: sweep 3s ease-in-out infinite;
        }

        @keyframes sweep {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .game-arena {
            background: var(--gradient-stadium);
            border: 3px solid #00ff88;
            border-radius: 30px;
            box-shadow: 
                inset 0 0 50px rgba(0,255,136,0.2),
                0 0 100px rgba(0,255,136,0.3);
            position: relative;
            overflow: hidden;
        }

        .field-hologram {
            background: 
                radial-gradient(circle at 25% 25%, rgba(0,255,136,0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(0,212,255,0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 25%, rgba(255,0,128,0.1) 0%, transparent 50%),
                radial-gradient(circle at 25% 75%, rgba(255,170,0,0.1) 0%, transparent 50%),
                linear-gradient(45deg, #00ff88 25%, transparent 25%), 
                linear-gradient(-45deg, #00ff88 25%, transparent 25%), 
                linear-gradient(45deg, transparent 75%, #00ff88 75%), 
                linear-gradient(-45deg, transparent 75%, #00ff88 75%);
            background-size: 60px 60px, 80px 80px, 70px 70px, 90px 90px, 30px 30px, 30px 30px, 30px 30px, 30px 30px;
            background-position: 0 0, 0 0, 0 0, 0 0, 0 0, 0 15px, 15px -15px, -15px 0px;
            animation: hologramEffect 8s ease-in-out infinite;
        }

        /* CARD ARCADE SYSTEM */
        .card-arcade {
            perspective: 1500px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .card-arcade:hover {
            transform: translateY(-15px) rotateX(10deg);
            filter: drop-shadow(0 20px 40px rgba(0,255,136,0.4));
        }

        .card-inner-arcade {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
        }

        .card-arcade.flipped .card-inner-arcade {
            animation: cardFlipArcade 0.8s ease-out forwards;
        }

        .card-face-arcade {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            overflow: hidden;
            border: 3px solid transparent;
        }

        .card-back-arcade {
            background: linear-gradient(135deg, #000 0%, #1a1a2e 50%, #0f3460 100%);
            border-image: linear-gradient(45deg, #00ff88, #00d4ff, #ff0080) 1;
            box-shadow: var(--glow-blue);
        }

        .card-front-arcade {
            transform: rotateY(180deg);
            background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
            border-image: linear-gradient(45deg, #ffaa00, #ff6b35, #f7931e) 1;
            box-shadow: var(--glow-gold);
        }

        .card-back-arcade::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 80px;
            height: 80px;
            transform: translate(-50%, -50%);
            background: radial-gradient(circle, #00ff88 0%, #00d4ff 50%, #ff0080 100%);
            border-radius: 50%;
            animation: neonPulse 2s ease-in-out infinite;
        }

        .player-cyber {
            background: linear-gradient(135deg, rgba(0,255,136,0.1), rgba(0,212,255,0.1));
            border: 2px solid #00ff88;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        /* FLOATING ELEMENTS */
        .digital-particles {
            position: fixed;
            width: 100vw;
            height: 100vh;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #00ff88;
            animation: digitalRain 3s linear infinite;
        }

        .particle:nth-child(2n) { background: #00d4ff; animation-duration: 4s; }
        .particle:nth-child(3n) { background: #ff0080; animation-duration: 5s; }
        .particle:nth-child(4n) { background: #ffaa00; animation-duration: 3.5s; }

        .stadium-atmosphere {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 150px;
            background: linear-gradient(180deg, rgba(0,255,136,0.2) 0%, transparent 100%);
            pointer-events: none;
            z-index: 2;
            animation: stadiumLights 6s ease-in-out infinite;
        }


        .btn-secondary {
            background: linear-gradient(135deg, #ff0080 0%, #ff6b35 100%);
            box-shadow: var(--glow-pink);
        }

        .btn-secondary:hover {
            box-shadow: 
                var(--glow-pink),
                0 10px 30px rgba(255,0,128,0.3);
        }

        .btn-premium {
            background: linear-gradient(135deg, #ffaa00 0%, #f7931e 100%);
            box-shadow: var(--glow-gold);
        }

        .btn-premium:hover {
            box-shadow: 
                var(--glow-gold),
                0 10px 30px rgba(255,170,0,0.3);
        }

        /* RESPONSIVE ARCADE */
        @media (max-width: 768px) {
            .card-arcade { height: 120px; }
            .neon-logo { font-size: 1.5rem; }
            .stats-arcade { padding: 10px; }
        }

        @media (max-width: 640px) {
            .card-arcade { height: 100px; }
            .neon-logo { font-size: 1.2rem; }
        }

        /* MODAL OVERLAY */
        .modal-overlay {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        /* MODAL ARCADE */
        .modal-arcade {
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .modal-content-arcade {
            background: linear-gradient(135deg, #000 0%, #1a1a2e 50%, #0f3460 100%);
            border: 3px solid #00ff88;
            border-radius: 30px;
            box-shadow: var(--glow-green);
            animation: hologramEffect 4s ease-in-out infinite;
        }

        /* ACHIEVEMENTS ARCADE */
        .achievement-card {
            background: linear-gradient(135deg, rgba(0,255,136,0.1) 0%, rgba(0,212,255,0.1) 100%);
            border: 2px solid #00ff88;
            border-radius: 20px;
            box-shadow: var(--glow-green);
            transition: all 0.3s ease;
        }

        .achievement-card:hover {
            transform: scale(1.02);
            box-shadow: var(--glow-blue);
            border-color: #00d4ff;
        }

        .achievement-unlocked {
            background: linear-gradient(135deg, rgba(255,170,0,0.2) 0%, rgba(247,147,30,0.2) 100%);
            border-color: #ffaa00;
            box-shadow: var(--glow-gold);
        }

        /* CYBER GAME COMPONENTS */
        .cyber-header {
            background: linear-gradient(135deg, rgba(0,0,0,0.95) 0%, rgba(26,26,46,0.95) 100%);
            border-bottom: 3px solid #00ff88;
            box-shadow: 0 5px 30px rgba(0,255,136,0.4);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .cyber-stat-card {
            background: linear-gradient(135deg, rgba(0,0,0,0.8) 0%, rgba(26,26,46,0.8) 100%);
            border: 2px solid #00ff88;
            border-radius: 15px;
            padding: 1rem;
            text-align: center;
            box-shadow: var(--glow-green);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            position: relative;
            overflow: hidden;
        }

        .cyber-stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0,255,136,0.3), transparent);
            animation: sweep 4s ease-in-out infinite;
        }

        .cyber-game-area {
            background: var(--gradient-stadium);
            border: 3px solid #00ff88;
            border-radius: 30px;
            box-shadow: 
                inset 0 0 50px rgba(0,255,136,0.2),
                0 0 100px rgba(0,255,136,0.3);
            overflow: hidden;
            margin-bottom: 2rem;
        }

        .cyber-field-header {
            background: 
                radial-gradient(circle at 25% 25%, rgba(0,255,136,0.2) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(0,212,255,0.2) 0%, transparent 50%),
                linear-gradient(45deg, #000 0%, #1a1a2e 50%, #0f3460 100%);
            padding: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            border-bottom: 2px solid #00ff88;
        }

        .cyber-trophy-icon {
            background: linear-gradient(135deg, #ffaa00 0%, #f7931e 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--glow-gold);
        }

        .cyber-level-badge {
            background: linear-gradient(135deg, #00ff88 0%, #00d4ff 100%);
            color: #000;
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: var(--glow-green);
            border: 2px solid #ffffff;
            animation: neonPulse 3s ease-in-out infinite;
        }

        .cyber-controls-panel {
            background: linear-gradient(135deg, rgba(0,0,0,0.9) 0%, rgba(26,26,46,0.9) 100%);
            border-bottom: 2px solid #00d4ff;
            padding: 1.5rem;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
        }

        .cyber-button {
            background: linear-gradient(135deg, #00ff88 0%, #00d4ff 100%);
            border: none;
            color: #000;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 0.75rem 2rem;
            border-radius: 15px;
            box-shadow: var(--glow-green);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .electric-button {
            background: linear-gradient(135deg, #00ff88 0%, #00d4ff 100%);
            box-shadow: var(--glow-green);
        }

        .cyber-button {
            background: linear-gradient(135deg, #00d4ff 0%, #ff0080 100%);
            box-shadow: var(--glow-blue);
        }

        .neon-button {
            background: linear-gradient(135deg, #ff0080 0%, #ffaa00 100%);
            box-shadow: var(--glow-pink);
        }

        .cyber-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }

        .cyber-button:hover::before {
            left: 100%;
        }

        .cyber-button:hover {
            transform: scale(1.05) translateY(-3px);
            box-shadow: 
                0 0 30px rgba(0,255,136,0.5),
                0 10px 30px rgba(0,255,136,0.3);
        }

        .cyber-score-display {
            background: linear-gradient(135deg, rgba(0,0,0,0.7) 0%, rgba(26,26,46,0.7) 100%);
            border: 1px solid #00ff88;
            border-radius: 10px;
            padding: 0.5rem 1rem;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .cyber-grid-container {
            padding: 2rem;
            background: linear-gradient(135deg, rgba(0,0,0,0.5) 0%, rgba(26,26,46,0.5) 100%);
        }

        .soccer-game-grid {
            display: grid;
            gap: 1.5rem;
            max-width: 64rem;
            margin: 0 auto;
            grid-template-columns: repeat(4, 1fr);
            padding: 2rem;
        }

        .soccer-game-grid.grid-cols-3 {
            grid-template-columns: repeat(3, 1fr);
        }

        .soccer-game-grid.grid-cols-4 {
            grid-template-columns: repeat(4, 1fr);
        }

        .soccer-game-grid.grid-cols-6 {
            grid-template-columns: repeat(6, 1fr);
        }

        @media (min-width: 640px) {
            .soccer-game-grid.sm\\:grid-cols-4 {
                grid-template-columns: repeat(4, 1fr);
            }
            .soccer-game-grid.sm\\:grid-cols-6 {
                grid-template-columns: repeat(6, 1fr);
            }
        }

        @media (max-width: 768px) {
            .soccer-game-grid {
                gap: 1rem;
                padding: 1rem;
            }
            .soccer-game-grid.grid-cols-6 {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .cyber-completion-screen {
            text-align: center;
            margin-top: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(0,255,136,0.1) 0%, rgba(0,212,255,0.1) 100%);
            border: 3px solid #00ff88;
            border-radius: 25px;
            box-shadow: var(--glow-green);
        }

        .cyber-trophy-mega {
            width: 6rem;
            height: 6rem;
            background: linear-gradient(135deg, #ffaa00 0%, #f7931e 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--glow-gold);
            margin: 0 auto;
        }

        /* FIFA 2026 SOCCER CARD SYSTEM */
        .soccer-card {
            perspective: 1000px;
            cursor: pointer;
            transition: all 0.3s ease;
            height: auto;
            position: relative;
            z-index: 1;
            /* Mantener proporción estable para evitar saltos en filas */
            display: block;
            aspect-ratio: 2 / 3;
            overflow: hidden; /* evita que el giro invada otras celdas */
        }

        .soccer-card:hover:not(.flipped) {
            /* Evitamos desplazar en Y para que no "salte" al voltear */
            transform: scale(1.02);
            filter: drop-shadow(var(--shadow-hover));
            z-index: 2;
        }

        .soccer-card.flipped {
            /* Elevar ligeramente por encima de las demás */
            z-index: 3;
            position: relative;
            overflow: visible;
        }

        .soccer-card.flipped:hover {
            z-index: 4;
        }

        .soccer-card.selecting {
            animation: cardSelect 0.3s ease-out;
        }

        @keyframes cardSelect {
            0% { transform: scale(1); }
            50% { transform: scale(1.05) translateY(-2px); }
            100% { transform: scale(1); }
        }

        .soccer-card.matched {
            z-index: 1 !important; /* que no cubra a otras */
            transform: none; /* evitar crecer y tapar */
        }

        .card-container {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            /* Flip 3D real */
            transform-style: preserve-3d;
            transition: transform 0.6s ease;
            transform-origin: center center;
            will-change: transform;
        }

        /* Rotación al voltear */
        .soccer-card.flipped .card-container {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 16px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: transform 0.4s ease;
            /* Asegura que las escalas sucedan desde el centro y no cambien la posición */
            transform-origin: center center;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }

        /* Por defecto: cara trasera visible, frontal oculta */
        .card-back {
            background: 
                linear-gradient(45deg, var(--field-green) 25%, transparent 25%), 
                linear-gradient(-45deg, var(--field-green) 25%, transparent 25%), 
                linear-gradient(45deg, transparent 75%, var(--field-green) 75%), 
                linear-gradient(-45deg, transparent 75%, var(--field-green) 75%),
                var(--gradient-field);
            background-size: 30px 30px;
            background-position: 0 0, 0 15px, 15px -15px, -15px 0px;
            border: 4px solid var(--fifa-primary);
            box-shadow: var(--shadow-card);
            opacity: 1;
            visibility: visible;
            transform: scale(1);
        }

        .card-front {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border: 4px solid var(--fifa-secondary);
            box-shadow: var(--shadow-card);
            padding: 0;
            /* Visible por defecto; será mostrado al girar el contenedor */
            transform: rotateY(180deg);
            opacity: 1;
            visibility: visible;
        }

    /* Con flip 3D, no usamos opacidad/escala para alternar caras */

        .card-back {
            background: 
                linear-gradient(45deg, var(--field-green) 25%, transparent 25%), 
                linear-gradient(-45deg, var(--field-green) 25%, transparent 25%), 
                linear-gradient(45deg, transparent 75%, var(--field-green) 75%), 
                linear-gradient(-45deg, transparent 75%, var(--field-green) 75%),
                var(--gradient-field);
            background-size: 30px 30px;
            background-position: 0 0, 0 15px, 15px -15px, -15px 0px;
            border: 4px solid var(--fifa-primary);
            box-shadow: var(--shadow-card);
        }

        .card-front {
            /* Cara frontal para flip 3D: se muestra al rotar el contenedor */
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border: 4px solid var(--fifa-secondary);
            box-shadow: var(--shadow-card);
            padding: 0;
            transform: rotateY(180deg);
        }

        /* GAME GRID LAYOUT */
        #gameGrid {
            display: grid;
            gap: 1rem;
            position: relative;
        }

        #gameGrid > * {
            position: relative;
        }

        #gameGrid .soccer-card.flipped {
            z-index: 3;
        }

        /* Asegurar que cartas no volteadas no interfieran */
        #gameGrid .soccer-card:not(.flipped) {
            z-index: 1;
            position: relative;
        }

        .card-back::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 50% 20%, rgba(255,255,255,0.3) 0%, transparent 20%),
                radial-gradient(circle at 50% 80%, rgba(255,255,255,0.2) 0%, transparent 20%);
        }

        .player-card-modern {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .player-card-header {
            background: linear-gradient(135deg, var(--fifa-primary) 0%, #004d2e 100%);
            color: white;
            padding: 0.5rem;
            text-align: center;
            font-weight: bold;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .player-image-container {
            flex: 1;
            position: relative;
            background: linear-gradient(180deg, #e6f3ff 0%, #ffffff 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            min-height: 120px;
        }

        .player-image {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--fifa-secondary);
            box-shadow: 0 4px 15px rgba(0,119,72,0.3);
        }

        .player-info-modern {
            background: var(--fifa-primary);
            color: white;
            padding: 0.75rem 0.5rem;
            text-align: center;
        }

        .player-name-modern {
            font-weight: 900;
            font-size: 1rem;
            margin-bottom: 0.25rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .player-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .player-number-modern {
            background: var(--fifa-secondary);
            color: var(--fifa-primary);
            font-weight: 900;
            padding: 0.25rem 0.5rem;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .country-flag-modern {
            width: 24px;
            height: 16px;
            border-radius: 2px;
            background-size: cover;
            background-position: center;
            border: 1px solid rgba(255,255,255,0.3);
        }

        /* FIFA LOGO ON BACK */
        .fifa-logo {
            background: var(--gradient-field);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid var(--field-white);
            box-shadow: 0 4px 20px rgba(255,215,0,0.4);
            margin-bottom: 1rem;
        }

        .fifa-text {
            color: var(--field-white);
            font-size: 1.5rem;
            font-weight: 900;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 0.5rem;
        }

        .world-cup-text {
            color: var(--fifa-secondary);
            font-size: 0.9rem;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        /* RESPONSIVE IMPROVEMENTS */
        @media (max-width: 768px) {
            .soccer-card {
                min-height: 180px;
            }
            
            .player-image {
                width: 60px;
                height: 60px;
            }
            
            .player-name-modern {
                font-size: 0.9rem;
            }
            
            .player-details {
                font-size: 0.75rem;
            }
        }

        /* Compactación específica para modo DIFFICULT HARD */
        #gameGrid.hard-mode .card-front,
        #gameGrid.hard-mode .card-back {
            border-width: 3px;
            border-radius: 12px;
        }

        #gameGrid.hard-mode .player-card-modern {
            border-radius: 10px;
        }

        #gameGrid.hard-mode .player-card-header {
            font-size: 0.7rem;
            padding: 0.35rem 0.4rem;
        }

        #gameGrid.hard-mode .player-image-container {
            padding: 0.5rem;
            min-height: 90px; /* reducir alto para que quepa todo */
        }

        #gameGrid.hard-mode .player-image {
            width: 56px;
            height: 56px;
            border-width: 2px;
        }

        #gameGrid.hard-mode .player-info-modern {
            padding: 0.5rem 0.4rem;
        }

        #gameGrid.hard-mode .player-name-modern {
            font-size: 0.85rem;
            margin-bottom: 0.15rem;
        }

        #gameGrid.hard-mode .player-details {
            font-size: 0.7rem;
        }

        #gameGrid.hard-mode .player-number-modern {
            font-size: 0.75rem;
            padding: 0.2rem 0.4rem;
            border-radius: 6px;
        }

        #gameGrid.hard-mode .country-flag-modern {
            width: 20px;
            height: 14px;
        }

        @media (max-width: 480px) {
            .soccer-card {
                min-height: 160px;
            }
            
            .player-image {
                width: 50px;
                height: 50px;
            }
            
            .player-name-modern {
                font-size: 0.8rem;
            }
            
            .player-card-header {
                font-size: 0.8rem;
                padding: 0.4rem;
            }
        }

        .card-back {
            background: 
                linear-gradient(45deg, var(--field-green) 25%, transparent 25%), 
                linear-gradient(-45deg, var(--field-green) 25%, transparent 25%), 
                linear-gradient(45deg, transparent 75%, var(--field-green) 75%), 
                linear-gradient(-45deg, transparent 75%, var(--field-green) 75%),
                var(--gradient-field);
            background-size: 30px 30px;
            background-position: 0 0, 0 15px, 15px -15px, -15px 0px;
            border: 4px solid var(--fifa-primary);
            box-shadow: var(--shadow-card);
            position: relative;
        }

        .card-back::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 50% 20%, rgba(255,255,255,0.3) 0%, transparent 20%),
                radial-gradient(circle at 50% 80%, rgba(255,255,255,0.2) 0%, transparent 20%);
        }

        .card-front {
            /* Unificar con la definición 3D */
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border: 4px solid var(--fifa-secondary);
            box-shadow: var(--shadow-card);
            padding: 0;
            transform: rotateY(180deg);
            opacity: 1;
            visibility: visible;
        }

        .fifa-logo {
            background: var(--gradient-field);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid var(--fifa-secondary);
            box-shadow: 0 4px 20px rgba(0,119,72,0.4);
            margin-bottom: 1rem;
        }

        .fifa-text {
            color: var(--field-white);
            font-weight: 900;
            font-size: 1.2rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            margin-bottom: 0.5rem;
        }

        .world-cup-text {
            color: var(--fifa-secondary);
            font-weight: 700;
            font-size: 0.9rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .player-card {
            position: relative;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
        }

        .player-number {
            background: var(--gradient-gold);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 1.5rem;
            color: var(--fifa-dark);
            border: 3px solid var(--field-white);
            box-shadow: 0 4px 15px rgba(255,215,0,0.4);
            margin-bottom: 1rem;
        }

        .player-info {
            text-align: center;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .player-name {
            font-weight: 900;
            font-size: 1.1rem;
            color: var(--fifa-dark);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .player-country {
            font-weight: 600;
            color: var(--fifa-primary);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .player-position {
            background: var(--fifa-accent);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: inline-block;
        }

        .country-flag {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 30px;
            height: 20px;
            border-radius: 4px;
            background: linear-gradient(45deg, #ccc 50%, #999 50%);
            border: 1px solid #666;
        }

        .soccer-matched {
            transform: scale(1.05);
            box-shadow: 0 0 30px var(--fifa-secondary) !important;
            border-color: var(--fifa-secondary) !important;
        }

        /* FIFA HEADER STYLES */
        .fifa-header {
            background: 
                linear-gradient(135deg, rgba(0,119,72,0.95) 0%, rgba(34,139,34,0.95) 100%);
            border-bottom: 4px solid var(--fifa-secondary);
            box-shadow: 0 4px 20px rgba(0,119,72,0.4);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .fifa-logo-header {
            width: 80px;
            height: 80px;
            background: var(--gradient-gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid var(--field-white);
            box-shadow: 0 4px 20px rgba(255,215,0,0.4);
        }

        .fifa-badge-26 {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 32px;
            height: 32px;
            background: var(--fifa-accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--field-white);
            box-shadow: 0 2px 10px rgba(255,107,0,0.4);
        }

        .fifa-title {
            color: var(--field-white);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
        }

        .fifa-subtitle {
            color: var(--fifa-secondary);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .fifa-stat-card {
            background: 
                linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(248,249,250,0.9) 100%);
            border: 2px solid var(--fifa-secondary);
            border-radius: 15px;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 4px 15px rgba(255,215,0,0.3);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            min-width: 80px;
        }

        .fifa-stat-number {
            color: var(--fifa-primary);
        }

        .fifa-stat-label {
            color: var(--fifa-accent);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* FIFA CONTROLS STYLES */
        .fifa-controls-panel {
            background: 
                linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border: 2px solid rgba(255,215,0,0.3);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px rgba(0,119,72,0.2);
        }

        .fifa-btn {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 1.5rem;
            border-radius: 15px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            cursor: pointer;
            font-size: 0.9rem;
        }

        .fifa-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .fifa-btn:active {
            transform: translateY(0);
        }

        .fifa-btn-primary {
            background: var(--gradient-green);
            color: var(--field-green);
            background-color: var(--field-white);
            border-color: var(--fifa-secondary);
        }

        .fifa-btn-primary:hover {
            box-shadow: 0 6px 20px rgba(0,119,72,0.4);
        }

        .fifa-btn-secondary {
            background: var(--gradient-gold);
            color: var(--fifa-primary);
            border-color: var(--fifa-primary);
        }

        .fifa-btn-secondary:hover {
            box-shadow: 0 6px 20px rgba(255,215,0,0.4);
        }

        .fifa-btn-accent {
            background: 
                linear-gradient(135deg, var(--fifa-accent) 0%, #e55a00 100%);
            color: var(--field-white);
            border-color: var(--field-white);
        }

        .fifa-btn-accent:hover {
            box-shadow: 0 6px 20px rgba(255,107,0,0.4);
        }

        .fifa-btn-icon {
            font-size: 1.2rem;
        }

        .fifa-score-display {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: 
                linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(248,249,250,0.9) 100%);
            border: 2px solid var(--fifa-secondary);
            border-radius: 12px;
            padding: 0.75rem 1rem;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(255,215,0,0.3);
        }

        .fifa-score-icon {
            font-size: 1.1rem;
        }

        .fifa-score-number {
            color: var(--fifa-primary);
            font-weight: 700;
            font-size: 1.1rem;
        }

        /* FIFA MODALS */
        .fifa-modal-success {
            background: 
                linear-gradient(135deg, rgba(255,255,255,0.98) 0%, rgba(248,249,250,0.98) 100%);
            border: 4px solid var(--fifa-secondary);
            border-radius: 25px;
            padding: 3rem;
            text-align: center;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow: 0 20px 50px rgba(0,119,72,0.3);
            max-width: 500px;
            width: 90%;
            position: relative;
            overflow: hidden;
        }

        .fifa-modal-success::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--gradient-gold);
        }

        .fifa-success-icon {
            width: 100px;
            height: 100px;
            background: var(--gradient-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 6px solid var(--fifa-secondary);
            box-shadow: 0 10px 30px rgba(0,119,72,0.4);
            animation: bounceIn 0.8s ease-out;
        }

        .fifa-success-check {
            color: var(--fifa-primary);
            font-size: 3rem;
            font-weight: 900;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .fifa-modal-title {
            color: var(--fifa-primary);
            font-size: 2.5rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 1.5rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .fifa-modal-text {
            color: var(--fifa-primary);
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 2rem;
        }

        .fifa-modal-leaderboard {
            background: 
                linear-gradient(135deg, rgba(255,255,255,0.98) 0%, rgba(248,249,250,0.98) 100%);
            border: 4px solid var(--fifa-secondary);
            border-radius: 25px;
            padding: 3rem;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow: 0 20px 50px rgba(0,119,72,0.3);
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .fifa-modal-leaderboard::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--gradient-gold);
        }

        .fifa-close-btn {
            width: 50px;
            height: 50px;
            background: var(--fifa-accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--field-white);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255,107,0,0.3);
        }

        .fifa-close-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255,107,0,0.5);
        }

        .fifa-close-icon {
            color: var(--field-white);
            font-size: 1.25rem;
            font-weight: 700;
        }

        @keyframes bounceIn {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* MODALS CYBER */
        .cyber-modal-success {
            background: linear-gradient(135deg, rgba(0,0,0,0.95) 0%, rgba(26,26,46,0.95) 100%);
            border: 3px solid #00ff88;
            border-radius: 25px;
            padding: 2rem;
            max-width: 28rem;
            margin: 1rem;
            text-align: center;
            transform: scale(0.9);
            transition: all 0.3s ease;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow: var(--glow-green);
        }

        .cyber-success-icon {
            width: 5rem;
            height: 5rem;
            background: linear-gradient(135deg, #00ff88 0%, #00d4ff 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--glow-green);
            margin: 0 auto;
        }

        .cyber-modal-leaderboard {
            background: linear-gradient(135deg, rgba(0,0,0,0.95) 0%, rgba(26,26,46,0.95) 100%);
            border: 3px solid #00ff88;
            border-radius: 25px;
            padding: 2rem;
            max-width: 48rem;
            margin: 1rem;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow: var(--glow-green);
        }

        .cyber-close-btn {
            background: transparent;
            border: 2px solid #ff0080;
            color: #ff0080;
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.25rem;
        }

        .cyber-close-btn:hover {
            background: #ff0080;
            color: #000;
            box-shadow: var(--glow-pink);
        }

        /* NEON TEXT EFFECTS */
        .neon-text-electric {
            color: #00ff88;
            text-shadow: 0 0 10px #00ff88, 0 0 20px #00ff88, 0 0 30px #00ff88;
        }

        .neon-text-cyber {
            color: #00d4ff;
            text-shadow: 0 0 10px #00d4ff, 0 0 20px #00d4ff, 0 0 30px #00d4ff;
        }

        .neon-text-neon {
            color: #ff0080;
            text-shadow: 0 0 10px #ff0080, 0 0 20px #ff0080, 0 0 30px #ff0080;
        }

        .neon-text-gold {
            color: #ffaa00;
            text-shadow: 0 0 10px #ffaa00, 0 0 20px #ffaa00, 0 0 30px #ffaa00;
        }

        .glow-text {
            animation: neonPulse 3s ease-in-out infinite;
        }

        /* Disable heavy animations on mobile for performance */
        @media (max-width: 768px) {
            .glow-text {
                animation: none;
            }
            .holographic::before {
                display: none;
            }
            .pulse-glow {
                animation: none;
            }
        }

        /* SLIDE ANIMATIONS */
        .neon-slide-left {
            animation: arcadeSlide 1s ease-out;
        }

        .neon-slide-right {
            animation: arcadeSlide 1s ease-out;
            animation-direction: reverse;
        }

        .neon-fade-up {
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* HOLOGRAPHIC EFFECTS */
        .holographic {
            position: relative;
            overflow: hidden;
        }

        .holographic::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: holographicSweep 3s ease-in-out infinite;
            z-index: 1;
        }

        @keyframes holographicSweep {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .pulse-glow {
            animation: neonPulse 2s ease-in-out infinite;
        }

        /* FLOATING ELEMENTS */
        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1;
        }

        .floating-ball {
            position: absolute;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, #00ff88 0%, #00d4ff 50%, #ff0080 100%);
            border-radius: 50%;
            animation: floatBall 6s ease-in-out infinite;
            box-shadow: 0 0 20px rgba(0,255,136,0.6);
        }

        @keyframes floatBall {
            0%, 100% { transform: translateY(0px) scale(1); }
            50% { transform: translateY(-20px) scale(1.1); }
        }

        .stadium-lights {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 200px;
            background: linear-gradient(180deg, rgba(0,255,136,0.1) 0%, transparent 100%);
            pointer-events: none;
            z-index: 2;
            animation: stadiumLights 8s ease-in-out infinite;
        }
    </style>
</head>
    <div class="digital-particles" id="particles"></div>
    
    <div class="stadium-atmosphere"></div>

</head>
<body>
    <div class="stadium-lights"></div>
    
    <div class="floating-elements">
        <div class="floating-ball" style="top: 10%; left: 5%; animation-delay: 0s;"></div>
        <div class="floating-ball" style="top: 20%; right: 10%; animation-delay: 1s;"></div>
        <div class="floating-ball" style="bottom: 30%; left: 15%; animation-delay: 2s;"></div>
        <div class="floating-ball" style="bottom: 10%; right: 5%; animation-delay: 1.5s;"></div>
    </div>

    <header class="fifa-header relative z-10">
        <div class="max-w-7xl mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <div class="fifa-logo-header">
                            <i class="fas fa-futbol text-white text-3xl"></i>
                        </div>
                        <div class="fifa-badge-26">
                            <span class="text-sm font-bold text-white orbitron">26</span>
                        </div>
                    </div>
                    <div>
                        <h1 class="text-4xl font-black orbitron fifa-title">
                            FIFA WORLD CUP 2026
                        </h1>
                        <p class="text-xl font-bold fifa-subtitle">MEMORY CHAMPIONS</p>
                    </div>
                </div>

                <div class="hidden md:flex items-center space-x-6">
                    <div class="fifa-stat-card">
                        <div class="text-4xl font-bold fifa-stat-number orbitron" id="score">0</div>
                        <div class="text-sm fifa-stat-label font-medium">PUNTOS</div>
                    </div>
                    <div class="fifa-stat-card">
                        <div class="text-4xl font-bold fifa-stat-number orbitron" id="matches">0</div>
                        <div class="text-sm fifa-stat-label font-medium">PAREJAS</div>
                    </div>
                    <div class="fifa-stat-card">
                        <div class="text-4xl font-bold fifa-stat-number orbitron" id="moves">0</div>
                        <div class="text-sm fifa-stat-label font-medium">JUGADAS</div>
                    </div>
                    <div class="fifa-stat-card">
                        <div class="text-4xl font-bold fifa-stat-number orbitron" id="timer">00:00</div>
                        <div class="text-sm fifa-stat-label font-medium">TIEMPO</div>
                    </div>
                </div>
            </div>

            <div class="md:hidden mt-4 grid grid-cols-4 gap-2">
                <div class="cyber-stat-card">
                    <div class="text-xl font-bold neon-text-electric orbitron" id="scoreMobile">0</div>
                    <div class="text-xs neon-text-gold">PUNTOS</div>
                </div>
                <div class="cyber-stat-card">
                    <div class="text-xl font-bold neon-text-cyber orbitron" id="matchesMobile">0</div>
                    <div class="text-xs neon-text-gold">PAREJAS</div>
                </div>
                <div class="cyber-stat-card">
                    <div class="text-xl font-bold neon-text-neon orbitron" id="movesMobile">0</div>
                    <div class="text-xs neon-text-gold">JUGADAS</div>
                </div>
                <div class="cyber-stat-card">
                    <div class="text-xl font-bold neon-text-electric orbitron" id="timerMobile">00:00</div>
                    <div class="text-xs neon-text-gold">TIEMPO</div>
                </div>
            </div>
        </div>
    </header>

    <main class="relative z-10 max-w-7xl mx-auto px-4 py-8">
        <div class="cyber-game-area neon-fade-up">
            <div class="cyber-field-header">
                <div class="absolute inset-0 bg-gradient-to-r from-electric/20 via-cyber/10 to-neon/20"></div>
                <div class="relative z-10">
                    <div class="flex items-center justify-center space-x-6 mb-4">
                        <div class="w-16 h-16 cyber-trophy-icon holographic">
                            <i class="fas fa-trophy neon-text-gold text-2xl"></i>
                        </div>
                        <h2 class="text-5xl font-black orbitron neon-text-electric glow-text">
                            MEMORY CHAMPIONS
                        </h2>
                        <div class="w-16 h-16 cyber-trophy-icon holographic">
                            <i class="fas fa-medal neon-text-gold text-2xl"></i>
                        </div>
                    </div>
                    <p class="neon-text-cyber text-2xl font-bold glow-text">
                        ¡Encuentra las parejas de las estrellas del Mundial 2026!
                    </p>
                    <div class="mt-6">
                        <span class="cyber-level-badge orbitron" id="currentLevel">NIVEL FÁCIL</span>
                    </div>
                </div>
            </div>

            <div class="fifa-controls-panel">
                <div class="flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0">
                    <div class="flex flex-wrap items-center gap-4">
                        <button onclick="startNewGame()" class="fifa-btn fifa-btn-primary">
                            <span class="fifa-btn-icon">⚽</span>
                            <span>NUEVO JUEGO</span>
                        </button>
                        <button onclick="changeDifficulty()" class="fifa-btn fifa-btn-secondary">
                            <span class="fifa-btn-icon">⚙️</span>
                            <span>DIFICULTAD</span>
                        </button>
                        <button onclick="showLeaderboard()" class="fifa-btn fifa-btn-accent">
                            <span class="fifa-btn-icon">🏆</span>
                            <span>RANKING</span>
                        </button>
                    </div>
                    <div class="flex items-center space-x-6">
                        <div class="fifa-score-display">
                            <span class="fifa-score-icon">⭐</span>
                            <span class="font-bold">Mejor: <span id="bestScore" class="fifa-score-number">0</span></span>
                        </div>
                        <div class="fifa-score-display">
                            <span class="fifa-score-icon">🔥</span>
                            <span class="font-bold">Racha: <span id="streak" class="fifa-score-number">0</span></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="p-8">
                <div id="gameGrid" class="grid gap-4 max-w-4xl mx-auto">
                </div>
                
                <div id="gameComplete" class="hidden text-center mt-8 p-8 bg-gradient-to-r from-green-100 to-blue-100 rounded-2xl border-2 border-green-300 shadow-lg">
                    <div class="flex justify-center mb-6">
                        <div class="w-20 h-20 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center trophy-shine shadow-xl">
                            <i class="fas fa-trophy text-white text-3xl"></i>
                        </div>
                    </div>
                    <h3 class="text-3xl font-bold text-green-600 mb-4 orbitron">¡JUEGO COMPLETADO!</h3>
                    <p id="finalStats" class="text-gray-700 text-lg mb-6"></p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button onclick="startNewGame()" class="bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-bold py-3 px-8 rounded-xl transition-all transform hover:scale-105">
                            <i class="fas fa-redo mr-2"></i>JUGAR DE NUEVO
                        </button>
                        <button onclick="shareScore()" class="bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white font-bold py-3 px-8 rounded-xl transition-all transform hover:scale-105">
                            <i class="fas fa-share mr-2"></i>COMPARTIR
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid lg:grid-cols-2 gap-8">
            <div class="bg-white/95 backdrop-blur-md rounded-2xl shadow-xl p-6" style="animation: fadeInUp 1s ease-out 0.5s both;">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center orbitron">
                    <i class="fas fa-trophy text-yellow-500 mr-3"></i>
                    LOGROS DESBLOQUEADOS
                </h3>
                <div id="achievementsList" class="space-y-4">
                    <div class="text-gray-500 text-center py-8">
                        <i class="fas fa-lock text-4xl mb-4"></i>
                        <p>¡Juega para desbloquear logros!</p>
                    </div>
                </div>
            </div>

            <div class="bg-white/95 backdrop-blur-md rounded-2xl shadow-xl p-6" style="animation: fadeInUp 1s ease-out 0.7s both;">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center orbitron">
                    <i class="fas fa-store text-blue-500 mr-3"></i>
                    TIENDA PREMIUM
                </h3>
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-4 bg-gradient-to-r from-yellow-50 to-yellow-100 rounded-xl border-2 border-yellow-200 hover:shadow-lg transition-all">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-star text-white"></i>
                            </div>
                            <div>
                                <div class="font-bold text-lg">Tema Premium</div>
                                <div class="text-sm text-gray-600">Nuevos diseños y efectos</div>
                            </div>
                        </div>
                        <button onclick="purchaseItem('premium-theme', 500)" class="bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white px-6 py-2 rounded-lg font-bold transition-all transform hover:scale-105">
                            500 <i class="fas fa-coins"></i>
                        </button>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl border-2 border-blue-200 hover:shadow-lg transition-all">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 bg-gradient-to-r from-blue-400 to-blue-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-rocket text-white"></i>
                            </div>
                            <div>
                                <div class="font-bold text-lg">Potenciadores</div>
                                <div class="text-sm text-gray-600">Ayudas especiales</div>
                            </div>
                        </div>
                        <button onclick="purchaseItem('power-ups', 200)" class="bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-6 py-2 rounded-lg font-bold transition-all transform hover:scale-105">
                            200 <i class="fas fa-coins"></i>
                        </button>
                    </div>
                    
                    <div class="flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-green-100 rounded-xl border-2 border-green-200 hover:shadow-lg transition-all">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 bg-gradient-to-r from-green-400 to-green-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-users text-white"></i>
                            </div>
                            <div>
                                <div class="font-bold text-lg">Modo Multijugador</div>
                                <div class="text-sm text-gray-600">Compite online</div>
                            </div>
                        </div>
                        <button onclick="purchaseItem('multiplayer', 1000)" class="bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-6 py-2 rounded-lg font-bold transition-all transform hover:scale-105">
                            1000 <i class="fas fa-coins"></i>
                        </button>
                    </div>
                </div>
                
                <div class="mt-6 p-4 bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl border border-purple-200">
                    <div class="text-center">
                        <h4 class="font-bold text-purple-800 mb-2">💎 PASE DE TEMPORADA</h4>
                        <p class="text-sm text-purple-600 mb-3">Acceso completo a todos los contenidos</p>
                        <button onclick="purchaseSeasonPass()" class="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-2 px-6 rounded-lg transition-all transform hover:scale-105">
                            $9.99 USD
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="successModal" class="fixed inset-0 modal-overlay hidden items-center justify-center z-50">
        <div class="fifa-modal-success">
            <div class="flex justify-center mb-8">
                <div class="fifa-success-icon">
                    <span class="fifa-success-check">✓</span>
                </div>
            </div>
            <h3 class="fifa-modal-title">¡PAREJA ENCONTRADA!</h3>
            <p id="modalText" class="fifa-modal-text"></p>
            <button onclick="closeModal()" class="fifa-btn fifa-btn-primary text-xl py-4 px-10">
                <span class="fifa-btn-icon">⚽</span>
                <span>¡CONTINUAR!</span>
            </button>
        </div>
    </div>

    <div id="leaderboardModal" class="fixed inset-0 modal-overlay hidden items-center justify-center z-50">
        <div class="fifa-modal-leaderboard">
            <div class="flex items-center justify-between mb-8">
                <h3 class="fifa-modal-title">🏆 RANKING MUNDIAL</h3>
                <button onclick="closeLeaderboard()" class="fifa-close-btn" title="Cerrar">
                    <span class="fifa-close-icon">✕</span>
                </button>
            </div>
            <div id="leaderboardContent" class="space-y-4">
            </div>
        </div>
    </div>

    <script>
        
        let gameState = {
            score: 0,
            matches: 0,
            moves: 0,
            achievements: [],
            flippedCards: [],
            matchedCards: [],
            gameStarted: false,
            startTime: null,
            timerInterval: null,
            difficulty: 'easy',
            streak: 0,
            bestScore: parseInt(localStorage.getItem('fifa2026_bestScore')) || 0,
            coins: parseInt(localStorage.getItem('fifa2026_coins')) || 0,
            purchasedItems: JSON.parse(localStorage.getItem('fifa2026_purchased')) || [],
            soundEnabled: true
        };

        
        const players = {
            easy: [
                { 
                    name: "Messi", 
                    country: "Argentina", 
                    color: "#74ACDF", 
                    number: "10", 
                    position: "RW",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/28003.png",
                    fallback: "https://cdn3.futbin.com/content/fifa25/img/players/158023.png?fm=png&ixlib=java-2.1.0&verzion=1&w=512&s=a9f7d6154869ddca4f846562dae8b5b6",
                    flag: "https://flagsapi.com/AR/flat/32.png"
                },
                { 
                    name: "Mbappé", 
                    country: "Francia", 
                    color: "#002654", 
                    number: "7", 
                    position: "CF",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/342229.png",
                    fallback: "https://assets.laliga.com/squad/2025/t186/p220160/1024x1024/p220160_t186_2025_0_003_000.png",
                    flag: "https://flagsapi.com/FR/flat/32.png"
                },
                { 
                    name: "Haaland", 
                    country: "Noruega", 
                    color: "#EF2B2D", 
                    number: "9", 
                    position: "ST",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/418560.png",
                    fallback: "https://media.api-sports.io/football/players/1100.png",
                    flag: "https://flagsapi.com/NO/flat/32.png"
                },
                { 
                    name: "Bellingham", 
                    country: "Inglaterra", 
                    color: "#012169", 
                    number: "5", 
                    position: "CM",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/581678.png",
                    fallback: "https://www.soyfutbol.com/img/2021/06/13/jude_bellingham_crop1623605320285.jpg?__scale=w:1200,h:1200,t:2",
                    flag: "https://flagsapi.com/GB/flat/32.png"
                },
                { 
                    name: "Vinícius Jr.", 
                    country: "Brasil", 
                    color: "#009739", 
                    number: "7", 
                    position: "LW",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/371998.png",
                    fallback: "https://assets.laliga.com/squad/2025/t186/p246333/1024x1024/p246333_t186_2025_0_003_000.png",
                    flag: "https://flagsapi.com/BR/flat/32.png"
                },
                { 
                    name: "Rodri", 
                    country: "España", 
                    color: "#C60B1E", 
                    number: "16", 
                    position: "CDM",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/357305.png",
                    fallback: "https://img.uefa.com/imgml/TP/players/3/2024/cutoff/250082664.webp",
                    flag: "https://flagsapi.com/ES/flat/32.png"
                }
            ],
            medium: [
                { 
                    name: "Messi", 
                    country: "Argentina", 
                    color: "#74ACDF", 
                    number: "10", 
                    position: "RW",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/28003.png",
                    fallback: "https://cdn3.futbin.com/content/fifa25/img/players/158023.png?fm=png&ixlib=java-2.1.0&verzion=1&w=512&s=a9f7d6154869ddca4f846562dae8b5b6",
                    flag: "https://flagsapi.com/AR/flat/32.png"
                },
                { 
                    name: "Mbappé", 
                    country: "Francia", 
                    color: "#002654", 
                    number: "7", 
                    position: "CF",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/342229.png",
                    fallback: "https://assets.laliga.com/squad/2025/t186/p220160/1024x1024/p220160_t186_2025_0_003_000.png",
                    flag: "https://flagsapi.com/FR/flat/32.png"
                },
                { 
                    name: "Haaland", 
                    country: "Noruega", 
                    color: "#EF2B2D", 
                    number: "9", 
                    position: "ST",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/418560.png",
                    fallback: "https://media.api-sports.io/football/players/1100.png",
                    flag: "https://flagsapi.com/NO/flat/32.png"
                },
                { 
                    name: "Bellingham", 
                    country: "Inglaterra", 
                    color: "#012169", 
                    number: "5", 
                    position: "CM",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/581678.png",
                    fallback: "https://www.soyfutbol.com/img/2021/06/13/jude_bellingham_crop1623605320285.jpg?__scale=w:1200,h:1200,t:2",
                    flag: "https://flagsapi.com/GB/flat/32.png"
                },
                { 
                    name: "Vinícius Jr.", 
                    country: "Brasil", 
                    color: "#009739", 
                    number: "7", 
                    position: "LW",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/371998.png",
                    fallback: "https://assets.laliga.com/squad/2025/t186/p246333/1024x1024/p246333_t186_2025_0_003_000.png",
                    flag: "https://flagsapi.com/BR/flat/32.png"
                },
                { 
                    name: "Rodri", 
                    country: "España", 
                    color: "#C60B1E", 
                    number: "16", 
                    position: "CDM",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/357305.png",
                    fallback: "https://img.uefa.com/imgml/TP/players/3/2024/cutoff/250082664.webp",
                    flag: "https://flagsapi.com/ES/flat/32.png"
                },
                { 
                    name: "Pedri", 
                    country: "España", 
                    color: "#C60B1E", 
                    number: "8", 
                    position: "CM",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/573008.png",
                    fallback: "https://assets.laliga.com/squad/2025/t178/p490541/2048x2048/p490541_t178_2025_0_002_000.jpg",
                    flag: "https://flagsapi.com/ES/flat/32.png"
                },
                { 
                    name: "Gavi", 
                    country: "España", 
                    color: "#C60B1E", 
                    number: "6", 
                    position: "CM",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/683840.png",
                    fallback: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRwOwaeZtm3wuHAuwA5daY59JuTFUnJYzB57EohbUe8BNzorg8nUmO6moTdgXchH0W2DFg&usqp=CAU",
                    flag: "https://flagsapi.com/ES/flat/32.png"
                }
            ],
            hard: [
                { 
                    name: "Messi", 
                    country: "Argentina", 
                    color: "#74ACDF", 
                    number: "10", 
                    position: "RW",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/28003.png",
                    fallback: "https://cdn3.futbin.com/content/fifa25/img/players/158023.png?fm=png&ixlib=java-2.1.0&verzion=1&w=512&s=a9f7d6154869ddca4f846562dae8b5b6",
                    flag: "https://flagsapi.com/AR/flat/32.png"
                },
                { 
                    name: "Mbappé", 
                    country: "Francia", 
                    color: "#002654", 
                    number: "7", 
                    position: "CF",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/342229.png",
                    fallback: "https://assets.laliga.com/squad/2025/t186/p220160/1024x1024/p220160_t186_2025_0_003_000.png",
                    flag: "https://flagsapi.com/FR/flat/32.png"
                },
                { 
                    name: "Haaland", 
                    country: "Noruega", 
                    color: "#EF2B2D", 
                    number: "9", 
                    position: "ST",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/418560.png",
                    fallback: "https://media.api-sports.io/football/players/1100.png",
                    flag: "https://flagsapi.com/NO/flat/32.png"
                },
                { 
                    name: "Bellingham", 
                    country: "Inglaterra", 
                    color: "#012169", 
                    number: "5", 
                    position: "CM",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/581678.png",
                    fallback: "https://www.soyfutbol.com/img/2021/06/13/jude_bellingham_crop1623605320285.jpg?__scale=w:1200,h:1200,t:2",
                    flag: "https://flagsapi.com/GB/flat/32.png"
                },
                { 
                    name: "Vinícius Jr.", 
                    country: "Brasil", 
                    color: "#009739", 
                    number: "7", 
                    position: "LW",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/371998.png",
                    fallback: "https://assets.laliga.com/squad/2025/t186/p246333/1024x1024/p246333_t186_2025_0_003_000.png",
                    flag: "https://flagsapi.com/BR/flat/32.png"
                },
                { 
                    name: "Rodri", 
                    country: "España", 
                    color: "#C60B1E", 
                    number: "16", 
                    position: "CDM",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/357305.png",
                    fallback: "https://img.uefa.com/imgml/TP/players/3/2024/cutoff/250082664.webp",
                    flag: "https://flagsapi.com/ES/flat/32.png"
                },
                { 
                    name: "Pedri", 
                    country: "España", 
                    color: "#C60B1E", 
                    number: "8", 
                    position: "CM",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/573008.png",
                    fallback: "https://assets.laliga.com/squad/2025/t178/p490541/2048x2048/p490541_t178_2025_0_002_000.jpg",
                    flag: "https://flagsapi.com/ES/flat/32.png"
                },
                { 
                    name: "Gavi", 
                    country: "España", 
                    color: "#C60B1E", 
                    number: "6", 
                    position: "CM",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/683840.png",
                    fallback: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRwOwaeZtm3wuHAuwA5daY59JuTFUnJYzB57EohbUe8BNzorg8nUmO6moTdgXchH0W2DFg&usqp=CAU",
                    flag: "https://flagsapi.com/ES/flat/32.png"
                },
                { 
                    name: "Kane", 
                    country: "Inglaterra", 
                    color: "#012169", 
                    number: "9", 
                    position: "ST",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/132098.png",
                    fallback: "https://img.uefa.com/imgml/TP/players/3/2024/cutoff/250016833.webp",
                    flag: "https://flagsapi.com/GB/flat/32.png"
                },
                { 
                    name: "Saka", 
                    country: "Inglaterra", 
                    color: "#012169", 
                    number: "7", 
                    position: "RW",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/433177.png",
                    fallback: "https://img.uefa.com/imgml/TP/players/3/2024/cutoff/250106939.webp",
                    flag: "https://flagsapi.com/GB/flat/32.png"
                },
                { 
                    name: "Musiala", 
                    country: "Alemania", 
                    color: "#000000", 
                    number: "14", 
                    position: "CAM",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/580195.png",
                    fallback: "https://img.fcbayern.com/image/upload/f_auto/q_auto/ar_1:1,c_fill,g_custom,w_768/v1627302821/cms/public/images/fcbayern-com/players/spielerportraits/ganzkoerper/jamal_musiala.png",
                    flag: "https://flagsapi.com/DE/flat/32.png"
                },
                { 
                    name: "Wirtz", 
                    country: "Alemania", 
                    color: "#000000", 
                    number: "10", 
                    position: "CAM",
                    image: "https://resources.fifa.com/image/upload/t_s2/f_auto/assets/technical/player-photos/662952.png",
                    fallback: "https://b.fssta.com/uploads/application/soccer/headshots/73957.vresize.350.350.medium.1.png",
                    flag: "https://flagsapi.com/DE/flat/32.png"
                }
            ]
        };

        
        const achievements = [
            { id: 'first_match', name: 'Primera Pareja', description: 'Encuentra tu primera pareja', points: 50, icon: 'fas fa-heart' },
            { id: 'perfect_game', name: 'Juego Perfecto', description: 'Completa sin errores', points: 200, icon: 'fas fa-gem' },
            { id: 'speed_demon', name: 'Demonio de la Velocidad', description: 'Completa en menos de 60 segundos', points: 300, icon: 'fas fa-bolt' },
            { id: 'memory_master', name: 'Maestro de la Memoria', description: 'Gana 10 juegos seguidos', points: 500, icon: 'fas fa-brain' },
            { id: 'collector', name: 'Coleccionista', description: 'Encuentra todas las parejas en modo difícil', points: 400, icon: 'fas fa-star' }
        ];

        function createPlayerCard(player, index) {
            const colorHex = (player.color || '#007748').replace('#', '');
            const genericIcon = `https://ui-avatars.com/api/?name=${encodeURIComponent(player.name)}&background=${colorHex}&color=fff&size=80&bold=true`;
            const sources = [
                player.fallback,
                genericIcon,
                `https://via.placeholder.com/80x80/${colorHex}/FFFFFF?text=${encodeURIComponent(player.name.charAt(0))}`
            ].filter(Boolean);

            return `
                <div class="soccer-card" data-player="${player.name}" data-index="${index}">
                    <div class="card-container">
                        
                        <div class="card-face card-back">
                            <div class="fifa-logo">
                                <i class="fas fa-futbol text-white text-3xl"></i>
                            </div>
                            <div class="fifa-text orbitron">FIFA</div>
                            <div class="world-cup-text orbitron">WORLD CUP 2026</div>
                        </div>
                        
                        
                        <div class="card-face card-front">
                            <div class="player-card-modern">
                                <div class="player-card-header">
                                    FIFA WORLD CUP 2026
                                </div>
                                
                                <div class="player-image-container">
                             <img src="${sources[0]}" 
                                 alt="${player.name}" 
                                 class="player-image"
                                 data-fallbacks='${JSON.stringify(sources.slice(1))}'
                                 onerror="handleImageError(this)">
                                </div>
                                
                                <div class="player-info-modern">
                                    <div class="player-name-modern">${player.name}</div>
                                    <div class="player-details">
                                        <div class="player-number-modern">#${player.number}</div>
                                        <div>${player.position}</div>
                                        <img src="${player.flag}" 
                                             alt="${player.country}" 
                                             class="country-flag-modern"
                                             onerror="this.style.display='none'">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function handleImageError(img) {
            try {
                const fallbacks = JSON.parse(img.dataset.fallbacks || '[]');
                if (fallbacks.length > 0) {
                    const nextUrl = fallbacks.shift();
                    img.dataset.fallbacks = JSON.stringify(fallbacks);
                    img.src = nextUrl;
                } else {
                    // Last resort: create a colored div with initial
                    const playerName = img.alt;
                    const initial = playerName.charAt(0);
                    img.style.display = 'none';
                    const fallbackDiv = document.createElement('div');
                    fallbackDiv.className = 'player-image-fallback';
                    fallbackDiv.style.cssText = `
                        width: 80px;
                        height: 80px;
                        border-radius: 50%;
                        background: linear-gradient(135deg, var(--fifa-primary), var(--fifa-secondary));
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        color: white;
                        font-weight: 900;
                        font-size: 2rem;
                        border: 3px solid var(--fifa-secondary);
                        box-shadow: 0 4px 15px rgba(0,119,72,0.3);
                    `;
                    fallbackDiv.textContent = initial;
                    img.parentNode.appendChild(fallbackDiv);
                }
            } catch (e) {
                console.error('Error handling image fallback:', e);
            }
        }

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function startNewGame() {
            // Reset game state
            gameState = {
                ...gameState,
                score: 0,
                matches: 0,
                moves: 0,
                flippedCards: [],
                matchedCards: [],
                gameStarted: true,
                startTime: Date.now(),
                timerInterval: null
            };

            // Create pairs of cards based on difficulty
            const selectedPlayers = players[gameState.difficulty];
            const gamePlayers = shuffleArray([...selectedPlayers, ...selectedPlayers]);
            
            // Set grid layout based on difficulty
            const gameGrid = document.getElementById('gameGrid');
            if (!gameGrid) {
                console.error('Game grid not found!');
                return;
            }
            
            const gridCols = gameState.difficulty === 'easy' ? 'grid-cols-2 sm:grid-cols-3 md:grid-cols-4' : 
                           gameState.difficulty === 'medium' ? 'grid-cols-2 sm:grid-cols-4 md:grid-cols-4' : 
                           'grid-cols-3 sm:grid-cols-4 md:grid-cols-6';
            const hardClass = gameState.difficulty === 'hard' ? 'hard-mode' : '';
            gameGrid.className = `grid gap-3 md:gap-4 ${gridCols} max-w-5xl mx-auto ${hardClass}`;
            
            console.log('Creating cards for', gamePlayers.length, 'players');
            gameGrid.innerHTML = gamePlayers.map((player, index) => createPlayerCard(player, index)).join('');
            
            // Add click event listeners to cards
            setTimeout(() => {
                const cards = document.querySelectorAll('.soccer-card');
                console.log('Adding event listeners to', cards.length, 'cards');
                cards.forEach((card, index) => {
                    card.addEventListener('click', () => {
                        console.log('Card clicked:', index);
                        flipCard(index);
                    });
                    card.style.cursor = 'pointer';
                });
            }, 50);
            
            // Hide game complete message
            document.getElementById('gameComplete').classList.add('hidden');
            
            // Start timer
            startTimer();
            updateDisplay();
            
            // Add entrance animation to cards
            setTimeout(() => {
                document.querySelectorAll('.cyber-card').forEach((card, index) => {
                    card.style.animation = `fadeInUp 0.6s ease-out ${index * 0.1}s both`;
                });
            }, 100);
        }

        function startTimer() {
            if (gameState.timerInterval) {
                clearInterval(gameState.timerInterval);
            }
            
            gameState.timerInterval = setInterval(() => {
                const elapsed = Math.floor((Date.now() - gameState.startTime) / 1000);
                const minutes = Math.floor(elapsed / 60).toString().padStart(2, '0');
                const seconds = (elapsed % 60).toString().padStart(2, '0');
                const timeString = `${minutes}:${seconds}`;
                
                document.getElementById('timer').textContent = timeString;
                document.getElementById('timerMobile').textContent = timeString;
            }, 1000);
        }

        function flipCard(index) {
            if (!gameState.gameStarted || gameState.flippedCards.length >= 2) return;
            
            const cards = document.querySelectorAll('.soccer-card');
            const card = cards[index];
            
            if (!card) {
                console.log('Card not found at index:', index);
                return;
            }
            
            const playerName = card.dataset.player;
            
            // Don't flip if already flipped or matched
            if (gameState.flippedCards.includes(index) || gameState.matchedCards.includes(index)) return;
            
            console.log('Flipping card:', index, playerName);
            
            // Add visual feedback without interfering with position
            card.classList.add('selecting');
            setTimeout(() => {
                card.classList.remove('selecting');
            }, 300);
            
            // Flip the card
            card.classList.add('flipped');
            gameState.flippedCards.push(index);
            
            // Check for match when 2 cards are flipped
            if (gameState.flippedCards.length === 2) {
                gameState.moves++;
                setTimeout(checkMatch, 800);
            }
            
            updateDisplay();
        }

        function checkMatch() {
            const [firstIndex, secondIndex] = gameState.flippedCards;
            const cards = document.querySelectorAll('.soccer-card');
            const firstCard = cards[firstIndex];
            const secondCard = cards[secondIndex];
            const firstPlayer = firstCard.dataset.player;
            const secondPlayer = secondCard.dataset.player;
            
            if (firstPlayer === secondPlayer) {
                // Match found!
                gameState.matchedCards.push(firstIndex, secondIndex);
                gameState.matches++;
                gameState.score += 100;
                gameState.streak++;
                
                // Soccer celebration effect
                firstCard.classList.add('soccer-matched');
                secondCard.classList.add('soccer-matched');
                
                // Show success modal
                document.getElementById('modalText').textContent = `¡Encontraste a ${firstPlayer}! +100 puntos`;
                showModal('successModal');
                
                // Check achievements
                checkAchievements();
                
                // Check if game is complete
                if (gameState.matches === players[gameState.difficulty].length) {
                    setTimeout(completeGame, 1000);
                }
            } else {
                // No match, flip cards back
                setTimeout(() => {
                    firstCard.classList.remove('flipped');
                    secondCard.classList.remove('flipped');
                }, 300);
            }
            
            gameState.flippedCards = [];
            updateDisplay();
        }

        function completeGame() {
            clearInterval(gameState.timerInterval);
            gameState.gameStarted = false;
            
            const totalTime = Math.floor((Date.now() - gameState.startTime) / 1000);
            const minutes = Math.floor(totalTime / 60);
            const seconds = totalTime % 60;
            
            // Calculate bonus points
            const timeBonus = Math.max(0, 300 - totalTime);
            const moveBonus = Math.max(0, (players[gameState.difficulty].length * 2 - gameState.moves) * 10);
            const difficultyMultiplier = gameState.difficulty === 'easy' ? 1 : gameState.difficulty === 'medium' ? 1.5 : 2;
            
            gameState.score += Math.floor((timeBonus + moveBonus) * difficultyMultiplier);
            gameState.coins += Math.floor(gameState.score / 10);
            
            // Update best score
            if (gameState.score > gameState.bestScore) {
                gameState.bestScore = gameState.score;
                localStorage.setItem('fifa2026_bestScore', gameState.bestScore.toString());
                showAchievementNotification('¡Nuevo Récord Personal!', 'fas fa-trophy');
            }
            
            // Save coins
            localStorage.setItem('fifa2026_coins', gameState.coins.toString());
            
            // Update leaderboard
            updateLeaderboard();
            
            document.getElementById('finalStats').innerHTML = `
                <div class="grid grid-cols-2 gap-4 text-center mb-4">
                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="text-2xl font-bold text-blue-600 orbitron">${minutes}:${seconds.toString().padStart(2, '0')}</div>
                        <div class="text-sm text-gray-600">Tiempo</div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="text-2xl font-bold text-purple-600 orbitron">${gameState.moves}</div>
                        <div class="text-sm text-gray-600">Movimientos</div>
                    </div>
                </div>
                <div class="text-xl font-bold text-green-600 orbitron">Puntos Totales: ${gameState.score}</div>
                <div class="text-lg text-yellow-600 mt-2">+${Math.floor(gameState.score / 10)} monedas ganadas</div>
            `;
            
            document.getElementById('gameComplete').classList.remove('hidden');
            checkAchievements();
            updateDisplay();
        }

        function checkAchievements() {
            achievements.forEach(achievement => {
                if (gameState.achievements.includes(achievement.id)) return;
                
                let unlocked = false;
                
                switch (achievement.id) {
                    case 'first_match':
                        unlocked = gameState.matches >= 1;
                        break;
                    case 'perfect_game':
                        unlocked = gameState.matches === players[gameState.difficulty].length && gameState.moves === players[gameState.difficulty].length;
                        break;
                    case 'speed_demon':
                        const elapsed = Math.floor((Date.now() - gameState.startTime) / 1000);
                        unlocked = gameState.matches === players[gameState.difficulty].length && elapsed < 60;
                        break;
                    case 'memory_master':
                        unlocked = gameState.streak >= 10;
                        break;
                    case 'collector':
                        unlocked = gameState.difficulty === 'hard' && gameState.matches === players[gameState.difficulty].length;
                        break;
                }
                
                if (unlocked) {
                    gameState.achievements.push(achievement.id);
                    gameState.score += achievement.points;
                    gameState.coins += Math.floor(achievement.points / 5);
                    showAchievementNotification(`¡${achievement.name} Desbloqueado!`, achievement.icon);
                    updateAchievementsList();
                }
            });
        }

        function showAchievementNotification(text, icon) {
            const notification = document.createElement('div');
            notification.className = 'achievement-notification';
            notification.innerHTML = `
                <div class="flex items-center space-x-3">
                    <i class="${icon} text-2xl"></i>
                    <div>
                        <div class="font-bold">${text}</div>
                        <div class="text-sm opacity-90">¡Sigue así!</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 4000);
        }

        function updateAchievementsList() {
            const achievementsList = document.getElementById('achievementsList');
            
            if (gameState.achievements.length === 0) {
                achievementsList.innerHTML = `
                    <div class="text-gray-500 text-center py-8">
                        <i class="fas fa-lock text-4xl mb-4"></i>
                        <p>¡Juega para desbloquear logros!</p>
                    </div>
                `;
                return;
            }
            
            achievementsList.innerHTML = gameState.achievements.map(achievementId => {
                const achievement = achievements.find(a => a.id === achievementId);
                return `
                    <div class="flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-green-100 rounded-xl border-2 border-green-200 shadow-sm">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 bg-gradient-to-r from-green-400 to-green-600 rounded-full flex items-center justify-center">
                                <i class="${achievement.icon} text-white"></i>
                            </div>
                            <div>
                                <div class="font-bold">${achievement.name}</div>
                                <div class="text-sm text-gray-600">${achievement.description}</div>
                            </div>
                        </div>
                        <div class="bg-green-500 text-white px-4 py-2 rounded-lg font-bold orbitron">
                            +${achievement.points}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateDisplay() {
            // Update desktop stats
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('matches').textContent = gameState.matches;
            document.getElementById('moves').textContent = gameState.moves;
            document.getElementById('bestScore').textContent = gameState.bestScore;
            document.getElementById('streak').textContent = gameState.streak;
            
            // Update mobile stats
            document.getElementById('scoreMobile').textContent = gameState.score;
            document.getElementById('matchesMobile').textContent = gameState.matches;
            document.getElementById('movesMobile').textContent = gameState.moves;
        }

        function changeDifficulty() {
            const difficulties = ['easy', 'medium', 'hard'];
            const currentIndex = difficulties.indexOf(gameState.difficulty);
            const nextIndex = (currentIndex + 1) % difficulties.length;
            gameState.difficulty = difficulties[nextIndex];
            
            const difficultyNames = {
                'easy': 'NIVEL FÁCIL',
                'medium': 'NIVEL MEDIO',
                'hard': 'NIVEL DIFÍCIL'
            };
            
            document.getElementById('currentLevel').textContent = difficultyNames[gameState.difficulty];
            
            if (gameState.gameStarted) {
                startNewGame();
            }
        }

        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeModal() {
            document.getElementById('successModal').classList.add('hidden');
            document.getElementById('successModal').classList.remove('flex');
        }

        function showLeaderboard() {
            // Load leaderboard data
            const leaderboard = JSON.parse(localStorage.getItem('fifa2026_leaderboard')) || [];
            
            const leaderboardContent = document.getElementById('leaderboardContent');
            if (leaderboard.length === 0) {
                leaderboardContent.innerHTML = `
                    <div class="text-center text-gray-600 py-8">
                        No hay partidas registradas todavía. Juega una y aparecerá aquí.
                    </div>
                `;
            } else {
                // Sort by score
                leaderboard.sort((a, b) => b.score - a.score);
                leaderboardContent.innerHTML = leaderboard.slice(0, 10).map((player, index) => `
                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl">
                        <div class="flex items-center space-x-4">
                            <div class="w-10 h-10 ${index < 3 ? 'bg-gradient-to-r from-yellow-400 to-yellow-600' : 'bg-gray-400'} rounded-full flex items-center justify-center text-white font-bold">
                                ${index + 1}
                            </div>
                            <div>
                                <div class="font-bold text-lg">${player.name || 'Jugador'}</div>
                                <div class="text-sm text-gray-600 capitalize">${player.difficulty || ''}</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-xl font-bold text-blue-600 orbitron">${player.score}</div>
                            <div class="text-sm text-gray-600">${player.time || ''}</div>
                        </div>
                    </div>
                `).join('');
            }
            showModal('leaderboardModal');
        }

        function closeLeaderboard() {
            document.getElementById('leaderboardModal').classList.add('hidden');
            document.getElementById('leaderboardModal').classList.remove('flex');
        }

        function updateLeaderboard() {
            // This would normally sync with a backend
            const leaderboard = JSON.parse(localStorage.getItem('fifa2026_leaderboard')) || [];
            const totalTime = Math.floor((Date.now() - gameState.startTime) / 1000);
            const minutes = Math.floor(totalTime / 60);
            const seconds = totalTime % 60;
            
            leaderboard.push({
                name: 'Jugador Anónimo',
                score: gameState.score,
                time: `${minutes}:${seconds.toString().padStart(2, '0')}`,
                difficulty: gameState.difficulty,
                date: new Date().toISOString()
            });
            
            localStorage.setItem('fifa2026_leaderboard', JSON.stringify(leaderboard));
        }

        function shareScore() {
            if (navigator.share) {
                navigator.share({
                    title: 'FIFA World Cup 2026 - Memory Champions',
                    text: `¡Acabo de conseguir ${gameState.score} puntos en Memory Champions!`,
                    url: window.location.href
                });
            } else {
                // Fallback for browsers that don't support Web Share API
                const text = `¡Acabo de conseguir ${gameState.score} puntos en FIFA World Cup 2026 Memory Champions! ¿Puedes superarme?`;
                navigator.clipboard.writeText(text + ' ' + window.location.href);
                alert('¡Puntuación copiada al portapapeles!');
            }
        }

        function purchaseItem(itemId, cost) {
            if (gameState.coins >= cost) {
                gameState.coins -= cost;
                gameState.purchasedItems.push(itemId);
                localStorage.setItem('fifa2026_coins', gameState.coins.toString());
                localStorage.setItem('fifa2026_purchased', JSON.stringify(gameState.purchasedItems));
                
                const itemNames = {
                    'premium-theme': 'Tema Premium',
                    'power-ups': 'Potenciadores',
                    'multiplayer': 'Modo Multijugador'
                };
                
                showAchievementNotification(`¡${itemNames[itemId]} Desbloqueado!`, 'fas fa-shopping-cart');
                updateDisplay();
            } else {
                alert(`Necesitas ${cost - gameState.coins} monedas más para este artículo.`);
            }
        }

        function purchaseSeasonPass() {
            // This would integrate with a payment processor
            alert('¡Función de pago en desarrollo! Próximamente disponible.');
        }

        // Simplified Particle System for Performance
        class CyberParticleSystem {
            constructor() {
                this.particles = [];
                this.maxParticles = 20; // Reduced from 50
                this.canvas = this.createCanvas();
                this.ctx = this.canvas.getContext('2d');
                this.animationId = null;
                this.init();
            }

            createCanvas() {
                const canvas = document.createElement('canvas');
                canvas.style.position = 'fixed';
                canvas.style.top = '0';
                canvas.style.left = '0';
                canvas.style.width = '100%';
                canvas.style.height = '100%';
                canvas.style.pointerEvents = 'none';
                canvas.style.zIndex = '1';
                canvas.style.opacity = '0.4'; // Reduced opacity
                document.body.appendChild(canvas);
                return canvas;
            }

            init() {
                this.resize();
                this.createParticles();
                this.animate();
                window.addEventListener('resize', () => this.resize());
            }

            resize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }

            createParticles() {
                const colors = ['#00ff88', '#00d4ff'];
                for (let i = 0; i < this.maxParticles; i++) {
                    this.particles.push({
                        x: Math.random() * this.canvas.width,
                        y: Math.random() * this.canvas.height,
                        vx: (Math.random() - 0.5) * 0.3, // Slower movement
                        vy: (Math.random() - 0.5) * 0.3,
                        size: Math.random() * 2 + 1,
                        color: colors[Math.floor(Math.random() * colors.length)],
                        opacity: Math.random() * 0.3 + 0.1, // Lower opacity
                        life: 100
                    });
                }
            }

            animate() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Reduce to every other frame for performance
                if (Math.random() > 0.5) {
                    this.particles.forEach(particle => {
                        particle.x += particle.vx;
                        particle.y += particle.vy;
                        
                        if (particle.x < 0) particle.x = this.canvas.width;
                        if (particle.x > this.canvas.width) particle.x = 0;
                        if (particle.y < 0) particle.y = this.canvas.height;
                        if (particle.y > this.canvas.height) particle.y = 0;
                        
                        this.ctx.save();
                        this.ctx.globalAlpha = particle.opacity;
                        this.ctx.fillStyle = particle.color;
                        this.ctx.beginPath();
                        this.ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                        this.ctx.fill();
                        this.ctx.restore();
                    });
                }
                
                this.animationId = requestAnimationFrame(() => this.animate());
            }

            burst(x, y, color = '#00ff88') {
                // Simplified burst with fewer particles
                for (let i = 0; i < 5; i++) {
                    if (this.particles.length < this.maxParticles + 10) {
                        this.particles.push({
                            x: x,
                            y: y,
                            vx: (Math.random() - 0.5) * 4,
                            vy: (Math.random() - 0.5) * 4,
                            size: Math.random() * 3 + 1,
                            color: color,
                            opacity: 0.8,
                            life: 30
                        });
                    }
                }
                
                // Clean up old particles
                setTimeout(() => {
                    this.particles = this.particles.slice(0, this.maxParticles);
                }, 1000);
            }

            destroy() {
                if (this.animationId) {
                    cancelAnimationFrame(this.animationId);
                }
                if (this.canvas && this.canvas.parentNode) {
                    this.canvas.parentNode.removeChild(this.canvas);
                }
            }
        }

        // Holographic Card Effects
        function addHolographicEffect(element) {
            element.addEventListener('mousemove', (e) => {
                const rect = element.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                const rotateX = (y - centerY) / 10;
                const rotateY = (centerX - x) / 10;
                
                element.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.05, 1.05, 1.05)`;
                element.style.boxShadow = `${(x - centerX) / 5}px ${(y - centerY) / 5}px 20px rgba(0, 255, 136, 0.3)`;
            });
            
            element.addEventListener('mouseleave', () => {
                element.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)';
                element.style.boxShadow = '0 0 20px rgba(0, 255, 136, 0.2)';
            });
        }

        // Simplified Audio System
        class CyberAudioSystem {
            constructor() {
                this.enabled = false; // Disabled by default for performance
                this.sounds = {};
            }

            init() {
                // Optional - user can enable if desired
                return;
            }

            play(soundName) {
                // Disabled for performance
                return;
            }
        }

        // Initialize Cyber Effects
        let particleSystem = null;
        let audioSystem = null;

        // Initialize game
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing game...');
            
            // Initialize simplified systems
            try {
                particleSystem = new CyberParticleSystem();
                audioSystem = new CyberAudioSystem();
            } catch (e) {
                console.log('Effects disabled for performance:', e);
            }
            // Load saved data BEFORE starting game
            gameState.bestScore = parseInt(localStorage.getItem('fifa2026_bestScore')) || 0;
            gameState.coins = parseInt(localStorage.getItem('fifa2026_coins')) || 0;
            gameState.purchasedItems = JSON.parse(localStorage.getItem('fifa2026_purchased')) || [];

            startNewGame();
            updateDisplay();
            
            console.log('Game initialized successfully');
        });

        // Service Worker for PWA functionality (would be in separate file)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => console.log('SW registered'))
                    .catch(error => console.log('SW registration failed'));
            });
        }
    </script>
</body>
</html>
